#############################################################################
## data source definition
#############################################################################

source customers
{
    # data source type.
    type = mysql

	#####################################################################
	## SQL settings (for 'mysql' and 'pgsql' types)
	#####################################################################

	# some straightforward parameters for SQL source types
	sql_host				= 127.0.0.1
	sql_user				= root
	sql_pass				= root
	sql_db					= COMET
	sql_port				= 3306 # optional, default is 3306

	# main document fetch query
	# mandatory, integer document ID field MUST be the first selected column
	sql_query = \
        SELECT * FROM customers

	sql_attr_uint   = id
	sql_attr_string	= username
	sql_attr_string	= email
	sql_attr_string	= first_name
	sql_attr_string	= last_name
}

#############################################################################
## index definition
#############################################################################

# this is used in order to enable the sphixsearch indexer to re-index
index customers_import
{
	# document source(s) to index
	# multi-value, mandatory
	# document IDs must be globally unique across all sources
	source			= customers

	# index files path and file name, without extension
	# mandatory, path must be writable, extensions will be auto-appended
	path			= /var/lib/sphinxsearch/data/customers_import

	# document attribute values (docinfo) storage mode
	# optional, default is 'extern'
	# known values are 'none', 'extern' and 'inline'
	docinfo			= extern

	# memory locking for cached data (.spa and .spi), to prevent swapping
	# optional, default is 0 (do not mlock)
	# requires searchd to be run from root
	mlock			= 0

	# a list of morphology preprocessors to apply
	# optional, default is empty
	morphology		= none

	# minimum indexed word length
	# default is 1 (index everything)
	min_word_len		= 1

	# charset encoding type
	# optional, default is 'sbcs'
	# known types are 'sbcs' (Single Byte CharSet) and 'utf-8'
	charset_type		= utf-8

	# minimum word prefix length to index
	# optional, default is 0 (do not index prefixes)
	#
	min_prefix_len	= 2

	# minimum word infix length to index
	# optional, default is 0 (do not index infixes)
	#
	#min_infix_len		= 3

	# enable star-syntax (wildcards) when searching prefix/infix indexes
	# known values are 0 and 1
	# optional, default is 0 (do not use wildcard syntax)
	#
	enable_star		= 1
}

index customers
{
    type              = rt
    rt_mem_limit      = 64M

    path		        	= /var/lib/sphinxsearch/data/customers
    charset_type      = utf-8

    rt_field          = rt_name

    enable_star       = 1
    min_prefix_len    = 2
    expand_keywords   = 1
    dict              = keywords
}


#############################################################################
## indexer settings
#############################################################################

indexer
{
	# memory limit, in bytes, kiloytes (16384K) or megabytes (256M)
	# optional, default is 32M, max is 2047M, recommended is 256M to 1024M
	mem_limit			= 256M

}

#############################################################################
## searchd settings
#############################################################################

searchd
{
	# hostname, port, or hostname:port, or /unix/socket/path to listen on
	# multi-value, multiple listen points are allowed
	# optional, default is 0.0.0.0:9312 (listen on all interfaces, port 9312)
    listen      = 0.0.0.0:9312:mysql41

	# log file, searchd run info is logged here
	# optional, default is 'searchd.log'
	log					= /var/log/sphinxsearch/searchd.log

	# request timeout, seconds
	# optional, default is 5 minutes
	client_timeout		= 30

    workers = threads

	# PID file, searchd process ID file name
	# mandatory
	pid_file			= /var/run/searchd.pid

	# max amount of matches the daemon ever keeps in RAM, per-index
	# WARNING, THERE'S ALSO PER-QUERY LIMIT, SEE SetLimits() API CALL
	# default is 1000 (just like Google)
	max_matches			= 1000

	# seamless rotate, prevents rotate stalls if precaching huge datasets
	# optional, default is 1
	seamless_rotate		= 1

	# whether to forcibly preopen all indexes on startup
	# optional, default is 0 (do not preopen)
	preopen_indexes		= 0

	# whether to unlink .old index copies on succesful rotation.
	# optional, default is 1 (do unlink)
	unlink_old			= 1

	# max allowed per-query filter count
	# optional, default is 256
	max_filters			= 256

	# max allowed per-filter values count
	# optional, default is 4096
	max_filter_values	= 4096

}

# --eof--